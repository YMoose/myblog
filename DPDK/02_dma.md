## DPDK - RX
### 网卡到内存
#### 网卡上送
内核准备好DMA描述符（至少包括数据传输的源地址（SA）、目的地址（DA）、需要传输的数据量（data size）、和每次总线传输的数据位宽（transfer size））通过PIO/DMA告知DMA控制器，由DMA控制器执行数据传输工作（由DMA控制器掌管总线），CPU则执行其他任务，传输完成后DMA控制器通知CPU（交还总线控制权）。

一个DMA事务，需要内核创建一个支持DMA的存储区域，将进程虚拟地址转换成真实物理地址告知DMA，并启动DMA事务。这过程需要上下文切换、地址的查找和转换操作，这不利于高性能输入/输出。

DPDK通过询问内核来计算它的物理地址后使用`eal_unix_memory.c:rte_mem_lock`锁定内存，这样网卡硬件可以在IO事务时使用这些物理地址，网卡硬件可以自己启动DMA事务的方式配置硬件，使DPDK避免了不必要的开销，并且可以完全从用户空间执行输入/输出（？）。

### 内存到处理

### DMA
驱动程序将虚拟地址X提供给dma_map_single（）等接口，该接口设置任何所需的IOMMU映射并返回总线地址Z。然后驱动程序告诉设备对总线地址Z进行DMA，IOMMU将其映射到系统RAM中地址Y处的缓冲区。