# 2. 存储管理
## 2.1 Linux内存管理的基本框架
Linux内核的映射机制设置为三层：
- PGD->PMD->PE->PA
虚拟Linux内存管理单元分成四步:  
1. CR3寄存器上的PGD作数组指针[内存里的页面目录(PGD)下标]->中间目录(PMD)数组指针
2. 中间目录(PMD)数组指针[内存里的中间目录(PMD)下标]->页面表(PT)数组指针
3. 页面表(PT)数组指针[内存里的页面表(PT)下标]->页面表项(PTE)(也即真实物理页面首地址)
4. 真实物理页面首地址[内存里物理页面下标]=真实物理地址  

linux内核将内存空间分成两部分，最高的1G字节(逻辑地址0xC0000000~0xFFFFFFFF会被映射到物理地址的0x00000000~0xBFFFFFFF), 若Linux需要操作1G以外内存空间的内存，使用的是修改填充内核空间PTE以ZONE_HIGHMEM(逻辑地址空间)访问其他内存空间的内存。  

GDT(全局段描述符)包括：
1. 第1项：永远是0
2. 第2项：内核代码段
3. 第3项：内核数据段
4. 第4项：当前进程的代码段
5. 第5项：当前进程的数据段
6. 其他进程的LDT(局部段描述符)
7. 其他进程的TSS(任务状态段)