# OS
## 操作系统发展
![冯·诺依曼结构](pic/Von_Neumann_Architecture.svg)
计算任务的处理核心部件是CPU和Memory Unit（CPU与Memory Unit可以看作是有限状态机），其他均可以是为input和output。
操作系统是辅助计算机硬件完成计算任务（job）的。操作系统的功能可以根据计算机发展阶段来分析。
- 第一阶段：单用户系统：无功能（none）：CPU和Memory Unit的指令&数据直接从硬件上获取，Input和Output均只有单一形式；
- 第二阶段：批处理系统&多道程序系统：基础功能（basic）：CPU和Memory Unit的指令&数据由操作系统提供，Input和Output由操作系统管理
- 第三阶段：分时系统、多用户系统、分布式系统：更优秀的功能（more efficient and more flexible）：CPU、Memory Unit、I/O进行抽象，使得多个计算任务更有效率更灵活

从操作系统的发展可以看出操作系统是为了帮助编程人员在编写软件程序的过程中避免过多地考虑硬件细节。这些细节就包括有几方面
1. 对不同种类硬件可以使用相对统一的接口
2. 对硬件资源的高效利用
3. 安全性

操作系统发展的同时，硬件也在不断发展以提供操作系统实现上述功能的底层机制（CPU特权模式/MMU/TLB/中断描述符）

## 操作系统模块
可以将操作系统的各模块按照冯·诺依曼结构的来分类：
1. 进程管理：CPU
2. 内存管理：Memory
3. IPC：I/O
4. I/O设备：I/O
5. 文件系统：I/O
6. 网络：I/O
7. 系统调用、中断、程序异常：操作系统与用户软件交互底层机制

## 操作系统中的机制与策略

需要注意的是分层结构中的机制与策略，策略由上层设定，机制由下层提供。

- 用户软件
- 策略（即何时以何种方式使用操作系统的服务）由用户软件决定
- 机制（即如何使用操作系统提供的服务）由操作系统提供
- 操作系统
- 策略（即何时以何种方式使用硬件的特权指令）由操作系统决定
- 机制（即特权指令的范围与能力）由底层硬件提供
- 底层硬件

## 操作系统结构
隔离硬件和用户软件接口
### 宏内核
![课程包含的内容](pic/操作系统结构.jpg)
分层层次多
### 微内核
保留少数功能，但增加了性能损失
### 外核
类似于VMM(KVM)